# 百变助理 VAssistant-Server 💫

> 一个充满理想与现实碰撞的AI小程序后台项目

## 🎯 体验我们的小程序

![百变助理小程序二维码](./qrCode.jpg)

**扫码体验百变助理小程序** 📱  
这是我们的体验版，欢迎大家扫码体验！虽然代码不够完美，但我们的初心依然炽热。

---

## 📖 项目简介

百变助理是一个基于国内AI免费版的智能小程序后台服务，集成了多种AI对话功能，包括：

- 🤖 **智能对话**：基于智谱AI GLM-4-Flash模型
- ⚖️ **法律咨询**：专业的法律问题解答
- 👥 **多轮对话**：支持上下文记忆的连续对话
- 🔐 **微信授权**：完整的小程序用户体系
- 💡 **功能提示**：智能的使用建议

## 💔 项目的困境与无奈

说起这个项目，真的是一把辛酸泪... 😢

当年（2023年），小程序的审核还比较宽松，我们怀着满腔热血发布了前端代码。那时候AI还没有今天这么火爆，GPT-3.5刚刚崭露头角，我们就迫不及待地想要把AI的魅力带给更多用户。

**然而现实给了我们当头一棒！** 💥

随着AI技术的日新月异，从GPT-3.5到GPT-4，从Claude到国产大模型的百花齐放，我们发现：
- 前端代码已经发布，想要重新审核变得异常困难 😭
- AI接口在不断更新，模型在不断迭代
- 用户需求在不断变化，功能要求越来越高
- **但我们却被困在了已发布的前端框架里！**

为了适配前端的各种限制，为了让新的AI能力能够正常工作，我们不得不在后台代码上做各种妥协和hack：

```python
# 这样的代码随处可见，为了兼容前端的各种奇怪需求
if request_type == "old_frontend_format":
    # 兼容老版本前端的数据格式
    return format_old_response(data)
else:
    # 新的标准格式，但前端可能不支持
    return format_new_response(data)
```

**结果就是：后台代码变得非常不规范！** 😱

- 接口设计不统一
- 数据格式混乱
- 错误处理不一致
- 代码结构臃肿
- 技术债务堆积如山

## 😤 我们的坚持与努力

尽管面临重重困难，但我们没有放弃！💪

这个项目见证了：
- 从OpenAI到国产AI的技术迁移
- 从付费API到免费模型的成本优化
- 从简单对话到复杂功能的产品进化
- 从理想主义到现实妥协的心路历程

每一行代码都承载着我们的坚持，每一个API都记录着我们的努力。

## 🛠️ 技术栈

- **后端框架**：FastAPI
- **AI模型**：智谱AI GLM-4-Flash（免费版）
- **数据库**：MySQL
- **部署**：支持Docker部署
- **认证**：微信小程序授权

## 🚀 快速开始

### 环境要求
- Python 3.12.8+
- MySQL 5.7+

### 安装依赖
```bash
pip install configparser fastapi uvicorn cryptography PyMySQL zhipuai
```

### 配置文件
1. 复制配置模板：
```bash
cp config.ini.sample config.ini
```

2. 修改配置文件中的关键信息：
```ini
[wechat]
appid = 你的微信小程序AppID
secret = 你的微信小程序Secret

[zhipuai]
api_key = 你的智谱AI API Key
```

### 启动服务
```bash
python server.py
# 或者
uvicorn server:app --reload --host 0.0.0.0 --port 8000
```

## 📁 项目结构

```
VAssistant-Server/
├── server.py              # 主服务入口
├── common_ai_chat.py       # 通用AI聊天模块
├── api_chatSingle3.py      # 单轮对话API
├── api_chatMultiple3.py    # 多轮对话API（GPT-3.5兼容）
├── api_chatMultiple4.py    # 多轮对话API（GPT-4兼容）
├── api_chatLaw.py          # 法律咨询API
├── api_wxAuth.py           # 微信授权API
├── api_addUser.py          # 用户管理API
├── api_checkUser.py        # 用户验证API
├── api_getFunctions.py     # 功能列表API
├── api_getTips.py          # 使用提示API
├── config.ini.sample       # 配置文件模板
├── qrCode.jpg             # 小程序体验码
└── README.md              # 项目说明（你正在看的这个文件）
```

## 🤝 贡献指南

如果你也经历过类似的技术困境，如果你也理解我们的无奈，欢迎：

1. 🌟 给项目点个Star，这是对我们最大的鼓励
2. 🐛 提交Issue，帮我们发现问题
3. 🔧 提交PR，一起改善代码质量
4. 💬 分享经验，让更多人避免我们踩过的坑

## 📞 联系我们

- **作者**：lordli
- **版本**：2.0.0
- **更新时间**：2025-06-16
- **问题反馈**：有任何问题请联系Lord

## 📜 开源协议

本项目采用开源协议，详见 [LICENSE](./LICENSE) 文件。

---

## 💭 写在最后

这个项目可能不是最完美的，代码可能不是最规范的，但它承载着我们对AI技术的热爱和对用户体验的执着追求。

**每一个选择都有代价，每一次妥协都有原因。**

希望这个项目能够帮助到有类似需求的开发者，也希望大家能够理解我们在技术选择上的无奈与坚持。

如果你觉得这个项目对你有帮助，请不要吝啬你的Star ⭐️

如果你也有类似的经历，欢迎在Issues中分享你的故事 📖

**让我们一起在AI的浪潮中，坚持初心，勇敢前行！** 🚀

---

*"代码不只是代码，它是我们对技术的理解，对用户的承诺，对未来的期待。"*
